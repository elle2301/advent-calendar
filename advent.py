import streamlit as stimport jsonimport osimport datetimest.set_page_config(page_title="Advent Calendar 2025", layout="wide")# ========== CONFIG ==========SAVE_FILE = "doors.json"# Set this to None for real-time date# Example for testing: TEST_DATE = datetime.date(2025, 12, 3)TEST_DATE = None  # ========== DATE LOGIC ==========def get_today():    if TEST_DATE:        return TEST_DATE    return datetime.date.today()today = get_today()current_day = today.day if today.month == 12 else 0  # Only December counts# ========== JSON LOAD / SAVE ==========def load_doors():    if os.path.exists(SAVE_FILE):        with open(SAVE_FILE, "r") as f:            return set(json.load(f))    else:        return set()def save_doors(open_doors):    with open(SAVE_FILE, "w") as f:        json.dump(list(open_doors), f)# Load opened doorsopen_doors = load_doors()if "open_doors" not in st.session_state:    st.session_state.open_doors = open_doors# ========== CHRISTMAS STYLE WITH SNOW ==========st.markdown("""<style>body {    background: linear-gradient(to bottom, #fff8f0, #f7e1d7);    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;}/* Open box */.open-box {    background-color: #fff3cd;    border: 3px solid gold;    padding: 20px;    border-radius: 12px;    margin-top: 10px;    font-size: 42px;    text-align: center;    box-shadow: 0 0 12px gold;    transition: transform 0.2s;}.open-box:hover {    transform: scale(1.05);}/* Door button */div.stButton > button {    background-color: #d62828;    color: white;    font-size: 20px;    font-weight: bold;    border-radius: 12px;    padding: 20px;    width: 100%;    height: 100px;    box-shadow: 0 5px 10px rgba(0,0,0,0.2);    transition: all 0.2s;}div.stButton > button:hover {    background-color: #f77f00;    transform: translateY(-3px) scale(1.05);    cursor: pointer;}/* Snow animation */@keyframes snow {    0% { transform: translateY(-10px); }    100% { transform: translateY(100vh); }}.snowflake {    position: fixed;    top: -10px;    font-size: 24px;    color: #fff;    user-select: none;    pointer-events: none;    animation: snow linear infinite;}.snowflake:nth-child(1) { left: 5vw; animation-duration: 8s; }.snowflake:nth-child(2) { left: 20vw; animation-duration: 12s; }.snowflake:nth-child(3) { left: 50vw; animation-duration: 9s; }.snowflake:nth-child(4) { left: 70vw; animation-duration: 11s; }.snowflake:nth-child(5) { left: 85vw; animation-duration: 10s; }</style><div class="snowflake">‚ùÑ</div><div class="snowflake">‚ùÑ</div><div class="snowflake">‚ùÑ</div><div class="snowflake">‚ùÑ</div><div class="snowflake">‚ùÑ</div>""", unsafe_allow_html=True)# ========== HEADER ==========st.markdown(f"""<h1 style='text-align:center; color:#d62828; font-size: 60px;'>üéÑ Advent Calendar 2025 üéÑ</h1><p style='text-align:center; font-size: 22px; color:#444;'>Open one door each day in December!<br>Today is: <b>{today.strftime('%B %d, %Y')}</b></p>""", unsafe_allow_html=True)# ========== EMOJIS PER DOOR ==========emojis = {    1: "üéÅ", 2: "üç™", 3: "‚òÉÔ∏è", 4: "üéÑ", 5: "üïØÔ∏è", 6: "üç´",    7: "‚ùÑÔ∏è", 8: "üß¶", 9: "üé∂", 10: "ü¶å", 11: "üåü", 12: "üõ∑",    13: "üç≠", 14: "ü•õ", 15: "üõçÔ∏è", 16: "üéâ", 17: "üß∏", 18: "üçé",    19: "ü•®", 20: "üïäÔ∏è", 21: "üéÖ", 22: "üßë‚ÄçüéÑ", 23: "üîî", 24: "‚ú®"}# ========== LAYOUT ==========cols_per_row = 6for row in range(4):    cols = st.columns(cols_per_row)    for idx, col in enumerate(cols):        door = row * cols_per_row + idx + 1        if door > 24:            continue        with col:            # Check if today's door is allowed            can_open = (door == current_day)            is_open = door in st.session_state.open_doors            button_label = f"Door {door}"            if not is_open and not can_open:                button_label += " (locked üîí)"            if st.button(button_label, key=f"door{door}", disabled=not can_open and not is_open):                st.session_state.open_doors.add(door)                save_doors(st.session_state.open_doors)                is_open = True            if is_open:                st.markdown(f"<div class='open-box'>{emojis[door]}</div>", unsafe_allow_html=True)